\documentclass{book}
\usepackage{fontspec} %xelatex or lualatex
\usepackage{graphicx}
\usepackage{float}

\usepackage{color}
\usepackage{xcolor}
\usepackage{calc}
\newlength\captionLeftDimension
\newlength\captionRightDimension
\setlength\captionLeftDimension{ \fboxsep+(\fboxrule*3)}
\setlength\captionRightDimension{-\fboxsep+(\fboxrule*3)}
\usepackage{listings}

\definecolor{lightgray}{rgb}{.929,.929,.929}
\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}

%http://lenaherrmann.net/2010/05/20/javascript-syntax-highlighting-in-the-latex-listings-package
\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstset{
   language=JavaScript,
   backgroundcolor=\color{lightgray},
   extendedchars=true,
   basicstyle=\footnotesize\ttfamily,
   showstringspaces=false,
   showspaces=false,
   numbers=left,
   numberstyle=\footnotesize,
   numbersep=9pt,
   tabsize=2,
   breaklines=true,
   showtabs=false,
   captionpos=b
}

\lstset{frame=single,
    frameround=fttf,
    xleftmargin=\captionLeftDimension,
    rulecolor=\color{gray},
    xrightmargin=\captionRightDimension}
\usepackage{caption}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\parbox{\textwidth}{\colorbox{gray}{\parbox{\textwidth}{#1#2#3}}\vskip+1pt}}
\captionsetup[lstinputlisting]{format=listing,labelfont=white,textfont=white}



%http://www.maths.manchester.ac.uk/~kd/latextut/pdfbyex.htm
%http://www.maths.manchester.ac.uk/~kd/latextut/bookex.pdf
\parindent 1cm
\parskip 0.2cm
\topmargin 0.2cm
\oddsidemargin 1cm
\evensidemargin 0.5cm
\textwidth 15cm
\textheight 21cm

% rewrite section into newpage and section
%\let\stdsection\section
%\renewcommand\section{\newpage\stdsection}

%\makeindex -- how to use this?
% Note the tag used to make an index entry. You may need to consult Lamport's
% book~\cite{lamport} for details of the procedure to make the index input
% file; \LaTeX \ will create a pre-index by listing all the tagged
% items in the file {\tt bookex.idx} then you edit this into
% a {\tt theindex} environment, as {\tt index.tex}.


\title{Wheel.js By Example  
\thanks{Contribution from our BlazingCloud.net}
\thanks{Contribution from our Kane Baccigalupi}}

\author{Curtis J. Schofield \\ \\
  {\small\em \copyright \ Curtis J. Schofield \& BlazingCloud.net } \\ 
  {\small\em Draft date \today }}

\begin{document}
 \maketitle %-- how to use this?
 %\addcontentsline{toc}{chapter}{Contents}
 \pagenumbering{arabic}
 %\tableofcontents
%\listoffigures
%\listoftables
\chapter*{Preface}\normalsize
  \addcontentsline{toc}{chapter}{Preface}
\pagestyle{plain}
This book provides a way to learn {\tt Wheel.js} by exploring it's
contepts and providing examples of common {\tt Wheel.js } patterns
and implementation of common interface interaction patters with {\tt
Wheel.js }.




\pagestyle{headings}
\pagenumbering{arabic}

\include{chapters/one}
\include{chapters/two}




\begin{thebibliography}{99}
  \addcontentsline{toc}{chapter}{Bibliography}
\bibitem{lamport} L. Lamport. {\bf \LaTeX \ A Document Preparation System}
Addison-Wesley, California 1986.
\bibitem{lamport} CTJ. Dodson. {\bf \LaTeX \ PDF \LaTeX \ by Example}
http://www.maths.manchester.ac.uk/~kd/latextut/pdfbyex.htm, 2001.
\end{thebibliography}


\end{document}

